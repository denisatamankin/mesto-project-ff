{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project/./src/components/constants.js","webpack://mesto-project/./src/components/api.js","webpack://mesto-project/./src/components/card.js","webpack://mesto-project/./src/components/modal.js","webpack://mesto-project/./src/components/validation.js","webpack://mesto-project/./src/index.js"],"sourcesContent":["export const config = {\r\n    baseUrl: 'https://nomoreparties.co/v1/wff-cohort-21',\r\n    headers: {\r\n        authorization: ' c6362043-f590-45f1-bd8d-ce03cdfd9a11',\r\n        'Content-Type': 'application/json'\r\n      }\r\n};\r\n\r\nexport const validationConfig = {\r\n    formSelector: '.popup__form',\r\n    inputSelector: '.popup__input',\r\n    submitButtonSelector: '.popup__button',\r\n    errorPopupSelector: '.popup__error',\r\n    inactiveButtonClass: 'popup__button_disabled',\r\n    inputErrorClass: 'popup__input_type_error',\r\n    errorClass: 'popup__error_visible',\r\n};\r\n\r\nexport const cardTemplate = document.querySelector('#card-template').content;\r\n\r\nexport const cardsContainer = document.querySelector('.places__list');\r\nexport const popups = document.querySelectorAll('.popup');\r\nexport const formSelector = document.querySelector('.popup__form');\r\nexport const avatar = document.querySelector(\".profile__image\");\r\n\r\nexport const profileEditButton = document.querySelector('.profile__edit-button');\r\nexport const profileEditPopup = document.querySelector('.popup_type_edit');\r\nexport const inputProfileTitle = profileEditPopup.querySelector('.popup__input_type_name');\r\nexport const inputProfileDescription = profileEditPopup.querySelector('.popup__input_type_description');\r\nexport const profileTitle = document.querySelector('.profile__title');\r\nexport const profileDescription = document.querySelector('.profile__description');\r\n\r\nexport const addNewCardButton = document.querySelector('.profile__add-button');\r\nexport const newCardPopup = document.querySelector('.popup_type_new-card');\r\nexport const newCardForm = document.querySelector('[name=\"new-place\"]');\r\nexport const newCardPopupTextInput = document.querySelector('.popup__input_type_card-name');\r\nexport const newCardPopupUrlInput = document.querySelector('.popup__input_type_url');\r\n\r\nexport const cardImagePopup = document.querySelector('.popup_type_image');\r\nexport const popupImage = cardImagePopup.querySelector('.popup__image');\r\nexport const popupImageCaption = cardImagePopup.querySelector('.popup__caption');\r\n\r\nexport const avatarForm = document.querySelector('[name=\"avatar\"]');\r\nexport const avatarImage = document.querySelector('.profile__image');\r\nexport const avatarPopup = document.querySelector('.popup_type_avatar');\r\nexport const avatarPopupUrlInput = document.querySelector('.popup__input_type_url-avatar');\r\n\r\n","import {config} from './constants.js';\r\n\r\nfunction handleResponse(response) {\r\n    if (response.ok) {\r\n        return response.json()\r\n    }\r\n    return Promise.reject(`Ошибка: ${response.status}`)\r\n};\r\n\r\nexport function getUser() {\r\n    return fetch(`${config.baseUrl}/users/me`, {\r\n        method: \"GET\",\r\n        headers: config.headers,\r\n    })\r\n    .then(handleResponse);\r\n};\r\n\r\nexport function updateUser(name, about) {\r\n    return fetch(`${config.baseUrl}/users/me`, {\r\n        method: \"PATCH\",\r\n        headers: config.headers,\r\n        body: JSON.stringify({\r\n            name: name,\r\n            about: about,\r\n        }),\r\n    })\r\n    .then(handleResponse);\r\n}\r\n\r\nexport function getCards() {\r\n    return fetch(`${config.baseUrl}/cards`, {\r\n        method: \"GET\",\r\n        headers: config.headers,\r\n    })\r\n    .then(handleResponse);\r\n};\r\n\r\nexport function addNewCard(name, link, userId) {\r\n    return fetch(`${config.baseUrl}/cards`, {\r\n        method: \"POST\",\r\n        headers: config.headers,\r\n        body: JSON.stringify({\r\n            _id: userId,\r\n            name: name,\r\n            link: link,\r\n        }),\r\n    })\r\n    .then(handleResponse);\r\n}; \r\n\r\nexport function addLike(cardId) {\r\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n        method: \"PUT\",\r\n        headers: config.headers,\r\n    })\r\n    .then(handleResponse); \r\n};\r\n\r\nexport function removeLike(cardId) {\r\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n        method: \"DELETE\",\r\n        headers: config.headers,\r\n    })\r\n    .then(handleResponse); \r\n};\r\n\r\nexport function deleteCardRequest(cardId) {\r\n    return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n        method: \"DELETE\",\r\n        headers: config.headers,\r\n    })\r\n    .then(handleResponse); \r\n};\r\n\r\nexport function updateAvatar(avatar) {\r\n    return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n        method: \"PATCH\",\r\n        headers: config.headers,\r\n        body: JSON.stringify({\r\n            avatar: avatar,\r\n        }),\r\n    })\r\n    .then(handleResponse);\r\n}; \r\n\r\n\r\n","import {addLike, removeLike, deleteCardRequest} from \"./api.js\";\r\nimport { cardTemplate } from \"./constants.js\";\r\n\r\nexport function createCard(card, deleteCard, openImage, likeCard, userId) {    \r\n    const cardElement = cardTemplate.querySelector('.card').cloneNode(true);\r\n  \r\n    cardElement.querySelector('.card__title').textContent = card.name;\r\n  \r\n    const cardTitle = cardElement.querySelector('.card__title');\r\n    const cardImage = cardElement.querySelector('.card__image');\r\n\r\n    const deleteButton = cardElement.querySelector('.card__delete-button');\r\n\r\n    const likeButton = cardElement.querySelector('.card__like-button');\r\n    const likeCount = cardElement.querySelector('.card__like-count');\r\n  \r\n    cardTitle.textContent = card.name;\r\n    cardImage.src = card.link;\r\n    cardImage.alt = card.name;\r\n    \r\n    if (userId === card.owner._id) {\r\n        deleteButton.addEventListener(\"click\", function() {\r\n            deleteCard(card._id, cardElement)\r\n        });\r\n    } else deleteButton.remove();\r\n    \r\n    likeCount.textContent = card.likes.length;\r\n   \r\n    likeButton.addEventListener('click', function() {likeCard(card._id, likeButton, likeCount)});\r\n\r\n    if (card.likes.some((user) => user._id === userId)) {\r\n        likeButton.classList.add('card__like-button_is-active');\r\n    }\r\n  \r\n    cardImage.addEventListener('click', function() {openImage(card)});\r\n\r\n    return cardElement;\r\n};\r\n  \r\nexport function deleteCard(cardId, card) {\r\n    deleteCardRequest(cardId)\r\n        .then(function() {\r\n            card.remove();\r\n        })\r\n        .catch(function(error) {\r\n            console.log(error);                \r\n        });\r\n};\r\n\r\nexport function likeCard(cardId, likeButton, likeCount) {\r\n    if(!likeButton.classList.contains('card__like-button_is-active')) {\r\n        addLike(cardId)\r\n            .then(function(card) {\r\n                likeCount.textContent = card.likes.length;\r\n                likeButton.classList.add('card__like-button_is-active');\r\n            })\r\n            .catch(function(error) {\r\n                console.log(error);                \r\n            });\r\n    } else {\r\n        removeLike(cardId)\r\n            .then(function(card) {\r\n                likeCount.textContent = card.likes.length;\r\n                likeButton.classList.remove('card__like-button_is-active');\r\n            })\r\n            .catch(function(error) {\r\n                console.log(error);                \r\n            });\r\n    }\r\n};\r\n","export function openPopup(popup) {\r\n    popup.classList.add('popup_is-opened');\r\n    document.addEventListener('keydown', closePopupEsc);\r\n} \r\n\r\nexport function closePopup(popup) {\r\n    popup.classList.remove('popup_is-opened');\r\n    document.removeEventListener('keydown', closePopupEsc);\r\n} \r\n\r\nexport function closePopupEsc(event) {\r\n\r\n    if (event.key === \"Escape\") {\r\n        const popupIsOpen = document.querySelector('.popup_is-opened');\r\n\r\n        closePopup(popupIsOpen);\r\n    }\r\n}","import { validationConfig } from \"./constants.js\";\r\n\r\nexport function enableValidation(validationConfig) {\r\n    const formList = Array.from(document.querySelectorAll(validationConfig.formSelector));\r\n    formList.forEach(function(formSelector) {\r\n        formSelector.addEventListener('submit', function(event) {\r\n            event.preventDefault();\r\n        });\r\n        setEventListeners(formSelector, validationConfig);\r\n    });\r\n};\r\n\r\nexport function clearValidation(formSelector, validationConfig) {\r\n    const inputList = Array.from(formSelector.querySelectorAll(validationConfig.inputSelector));\r\n    const errorList = Array.from(formSelector.querySelectorAll(validationConfig.errorPopupSelector));\r\n    const submitButtonSelector = formSelector.querySelector(validationConfig.submitButtonSelector);    \r\n\r\n    errorList.forEach(function(errorSelector) {\r\n        errorSelector.classList.remove(validationConfig.errorClass);\r\n        errorSelector.textContent = '';\r\n    });\r\n    inputList.forEach(function(inputSelector) {\r\n        inputSelector.classList.remove(validationConfig.inputErrorClass);\r\n    });\r\n\r\n    submitButtonSelector.classList.add(validationConfig.inactiveButtonClass);\r\n    submitButtonSelector.disabled = true;\r\n};\r\n\r\nfunction setEventListeners(formSelector, validationConfig) {\r\n    const inputList = Array.from(formSelector.querySelectorAll(validationConfig.inputSelector));\r\n    const submitButtonSelector = formSelector.querySelector(validationConfig.submitButtonSelector);\r\n\r\n    toggleButtonState(inputList, submitButtonSelector, validationConfig);\r\n\r\n    inputList.forEach(function(inputSelector) {\r\n        inputSelector.addEventListener('input', function() {\r\n            checkInputValidity(formSelector, inputSelector, validationConfig);\r\n            toggleButtonState(inputList, submitButtonSelector, validationConfig);\r\n        });\r\n    });\r\n};\r\n\r\nfunction checkInputValidity(formSelector, inputSelector, validationConfig) {\r\n    if (inputSelector.validity.patternMismatch) {\r\n        inputSelector.setCustomValidity(inputSelector.dataset.errorMessage);\r\n    } else {\r\n        inputSelector.setCustomValidity(\"\");\r\n    }\r\n\r\n    if (!inputSelector.validity.valid) {\r\n        showInputError(formSelector, inputSelector, inputSelector.validationMessage, validationConfig);\r\n    } else {\r\n        hideInputError(formSelector, inputSelector, validationConfig);\r\n    }\r\n};\r\n\r\nfunction hasInvalidInput(inputList) {\r\n    return inputList.some(function(inputSelector) {\r\n        return !inputSelector.validity.valid;\r\n    })\r\n};\r\n\r\nfunction showInputError(formSelector, inputSelector, errorMessage, validationConfig) {\r\n    const errorSelector = formSelector.querySelector(`.${inputSelector.id}-error`);\r\n    inputSelector.classList.add(validationConfig.inputErrorClass);\r\n    errorSelector.textContent = errorMessage;\r\n    errorSelector.classList.add(validationConfig.errorClass);\r\n};\r\n\r\nfunction hideInputError(formSelector, inputSelector, validationConfig) {\r\n    const errorSelector = formSelector.querySelector(`.${inputSelector.id}-error`);\r\n    inputSelector.classList.remove(validationConfig.inputErrorClass);\r\n    errorSelector.classList.remove(validationConfig.errorClass);\r\n    errorSelector.textContent = '';\r\n};\r\n\r\nfunction toggleButtonState(inputList, submitButtonSelector, validationConfig) {\r\n    if (hasInvalidInput(inputList)) {\r\n      submitButtonSelector.disabled = true;\r\n      submitButtonSelector.classList.add(validationConfig.inactiveButtonClass);\r\n    } else {\r\n      submitButtonSelector.disabled = false;\r\n      submitButtonSelector.classList.remove(validationConfig.inactiveButtonClass);\r\n    }\r\n};\r\n  \r\n\r\n\r\n","import './styles/index.css';\r\nimport {createCard, deleteCard, likeCard} from './components/card.js';\r\nimport {openPopup, closePopup, closePopupEsc} from './components/modal.js';\r\nimport {enableValidation, clearValidation} from './components/validation.js';\r\nimport {getUser, updateUser, getCards, addNewCard, updateAvatar} from './components/api.js';\r\nimport {validationConfig,\r\n        cardsContainer,\r\n        popups,\r\n        formSelector,\r\n        avatar,\r\n        profileEditButton,\r\n        profileEditPopup,\r\n        inputProfileTitle,\r\n        inputProfileDescription,\r\n        profileTitle,\r\n        profileDescription,\r\n        addNewCardButton,\r\n        newCardPopup,\r\n        newCardForm,\r\n        newCardPopupTextInput,\r\n        newCardPopupUrlInput,\r\n        cardImagePopup,\r\n        popupImage,\r\n        popupImageCaption,\r\n        avatarForm,\r\n        avatarImage,\r\n        avatarPopup,\r\n        avatarPopupUrlInput,\r\n        cardTemplate} from './components/constants.js';\r\n\r\nPromise.all([getUser(), getCards()])\r\n    .then(([data, cards]) => {\r\n        avatar.style.backgroundImage = `url(${data.avatar})`;\r\n        profileTitle.textContent = data.name;\r\n        profileDescription.textContent = data.about;\r\n        const userId = data._id;\r\n        cards.forEach((card) => {\r\n          cardsContainer.append(\r\n            createCard(card, deleteCard, openImage, likeCard, userId)\r\n          );\r\n        });\r\n    })\r\n    .catch((err) => {\r\n        console.error('Ошибка:', err);\r\n    });\r\n\r\nfunction profileEdit() {\r\n    openPopup(profileEditPopup);\r\n    inputProfileTitle.value = profileTitle.textContent;\r\n    inputProfileDescription.value = profileDescription.textContent;\r\n    clearValidation(profileEditPopup, validationConfig);\r\n}; \r\n   \r\nprofileEditButton.addEventListener('click', profileEdit); \r\n\r\nfunction addCard() {\r\n    openPopup(newCardPopup);\r\n    newCardForm.reset();\r\n    clearValidation(newCardPopup, validationConfig);\r\n};\r\n\r\naddNewCardButton.addEventListener('click', addCard);\r\n\r\nfunction avatarEdit() {\r\n    openPopup(avatarPopup);\r\n    avatarForm.reset();\r\n    clearValidation(avatarPopup, validationConfig);\r\n};\r\n\r\navatarImage.addEventListener('click', avatarEdit);\r\n\r\npopups.forEach(function(popup) {\r\n    popup.addEventListener('click', function(event) {\r\n        if(event.target.classList.contains('popup__close')|| event.target.classList.contains('popup')) {\r\n            closePopup(popup);\r\n        }\r\n    })\r\n})\r\n\r\nfunction handleProfileFormSubmit(event) {\r\n    event.preventDefault();\r\n    const title = inputProfileTitle.value;\r\n    const description = inputProfileDescription.value;\r\n    event.submitter.textContent = 'Сохранение...';\r\n    updateUser(title, description)\r\n        .then(function() {\r\n            profileTitle.textContent = title;\r\n            profileDescription.textContent = description;\r\n            closePopup(profileEditPopup);\r\n        })\r\n        .catch(function(error) {\r\n            console.log(error);            \r\n        })\r\n        .finally(function() {\r\n            event.submitter.textContent = 'Сохранить';\r\n        })\r\n};\r\n\r\nprofileEditPopup.addEventListener('submit', handleProfileFormSubmit);\r\n\r\nfunction handleNewCardSubmit(event) {\r\n    event.preventDefault();\r\n    const name = newCardPopupTextInput.value;\r\n    const link = newCardPopupUrlInput.value;\r\n    event.submitter.textContent = 'Сохранение...';\r\n    addNewCard(name, link)\r\n        .then(function(card) {\r\n            cardsContainer.prepend(\r\n                createCard(card, deleteCard, openImage, likeCard, card.owner._id)\r\n            );\r\n            closePopup(newCardPopup);\r\n        })\r\n        .catch(function(error) {\r\n            console.log(error);            \r\n        })\r\n        .finally(function() {\r\n            event.submitter.textContent = 'Сохранить';\r\n        })\r\n}; \r\n\r\nnewCardPopup.addEventListener('submit', handleNewCardSubmit);\r\n\r\nfunction handleAvatarSubmit(event) {\r\n    event.preventDefault();\r\n    const avatarLink = avatarPopupUrlInput.value;\r\n    event.submitter.textContent = 'Сохранение...';\r\n    updateAvatar(avatarLink)\r\n        .then(function() {\r\n            avatar.style.backgroundImage = `url(${avatarLink})`;\r\n            closePopup(avatarPopup);\r\n        })\r\n        .catch(function(error) {\r\n            console.log(error);            \r\n        })\r\n        .finally(function() {\r\n            event.submitter.textContent = 'Сохранить';\r\n        })\r\n};\r\n\r\navatarPopup.addEventListener('submit', handleAvatarSubmit);\r\n\r\nfunction openImage(card) {    \r\n    popupImage.src = card.link;\r\n    popupImage.alt = card.name;    \r\n    popupImageCaption.textContent = card.name;    \r\n    openPopup(cardImagePopup);\r\n};    \r\n\r\nenableValidation(validationConfig);"],"names":["config","baseUrl","headers","authorization","validationConfig","formSelector","inputSelector","submitButtonSelector","errorPopupSelector","inactiveButtonClass","inputErrorClass","errorClass","cardTemplate","document","querySelector","content","cardsContainer","popups","querySelectorAll","avatar","profileEditButton","profileEditPopup","inputProfileTitle","inputProfileDescription","profileTitle","profileDescription","addNewCardButton","newCardPopup","newCardForm","newCardPopupTextInput","newCardPopupUrlInput","cardImagePopup","popupImage","popupImageCaption","avatarForm","avatarImage","avatarPopup","avatarPopupUrlInput","handleResponse","response","ok","json","Promise","reject","concat","status","createCard","card","deleteCard","openImage","likeCard","userId","cardElement","cloneNode","textContent","name","cardTitle","cardImage","deleteButton","likeButton","likeCount","src","link","alt","owner","_id","addEventListener","remove","likes","length","some","user","classList","add","cardId","fetch","method","then","deleteCardRequest","catch","error","console","log","contains","removeLike","addLike","openPopup","popup","closePopupEsc","closePopup","removeEventListener","event","key","clearValidation","inputList","Array","from","errorList","forEach","errorSelector","disabled","toggleButtonState","validity","valid","hasInvalidInput","all","_ref","_ref2","data","cards","style","backgroundImage","about","append","err","value","reset","target","preventDefault","title","description","submitter","body","JSON","stringify","finally","addNewCard","prepend","avatarLink","updateAvatar","patternMismatch","setCustomValidity","dataset","errorMessage","id","hideInputError","showInputError","validationMessage","checkInputValidity","setEventListeners","enableValidation"],"sourceRoot":""}