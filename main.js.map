{"version":3,"file":"main.js","mappings":"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","sources":["webpack://mesto-project/./src/components/cards.js","webpack://mesto-project/./src/components/api.js","webpack://mesto-project/./src/components/card.js","webpack://mesto-project/./src/components/modal.js","webpack://mesto-project/./src/components/validation.js","webpack://mesto-project/./src/index.js"],"sourcesContent":["export const initialCards = [\r\n    {\r\n      name: \"Архыз\",\r\n      link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg\",\r\n    },\r\n    {\r\n      name: \"Челябинская область\",\r\n      link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg\",\r\n    },\r\n    {\r\n      name: \"Иваново\",\r\n      link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg\",\r\n    },\r\n    {\r\n      name: \"Камчатка\",\r\n      link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg\",\r\n    },\r\n    {\r\n      name: \"Холмогорский район\",\r\n      link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg\",\r\n    },\r\n    {\r\n      name: \"Байкал\",\r\n      link: \"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg\",\r\n    }\r\n];","const config = {\r\n    baseUrl: 'https://nomoreparties.co/v1/wff-cohort-21',\r\n    headers: {\r\n        authorization: ' c6362043-f590-45f1-bd8d-ce03cdfd9a11',\r\n        'Content-Type': 'application/json'\r\n      }\r\n};\r\n\r\nfunction handleResponse(response) {\r\n    if (response.ok) {\r\n        return response.json()\r\n    }\r\n    return Promise.reject(`Ошибка: ${response.status}`)\r\n};\r\n\r\nexport function getUser() {\r\n    return fetch(`${config.baseUrl}/users/me`, {\r\n        method: \"GET\",\r\n        headers: config.headers,\r\n    })\r\n    .then(handleResponse);\r\n};\r\n\r\nexport function updateUser(name, about) {\r\n    return fetch(`${config.baseUrl}/users/me`, {\r\n        method: \"PATCH\",\r\n        headers: config.headers,\r\n        body: JSON.stringify({\r\n            name: name,\r\n            about: about,\r\n        }),\r\n    })\r\n    .then(handleResponse);\r\n}\r\n\r\nexport function getCards() {\r\n    return fetch(`${config.baseUrl}/cards`, {\r\n        method: \"GET\",\r\n        headers: config.headers,\r\n    })\r\n    .then(handleResponse);\r\n};\r\n\r\nexport function addNewCard(name, link, userId) {\r\n    return fetch(`${config.baseUrl}/cards`, {\r\n        method: \"POST\",\r\n        headers: config.headers,\r\n        body: JSON.stringify({\r\n            _id: userId,\r\n            name: name,\r\n            link: link,\r\n        }),\r\n    })\r\n    .then(handleResponse);\r\n}; \r\n\r\nexport function addLike(cardId) {\r\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n        method: \"PUT\",\r\n        headers: config.headers,\r\n    })\r\n    .then(handleResponse); \r\n};\r\n\r\nexport function removeLike(cardId) {\r\n    return fetch(`${config.baseUrl}/cards/likes/${cardId}`, {\r\n        method: \"DELETE\",\r\n        headers: config.headers,\r\n    })\r\n    .then(handleResponse); \r\n};\r\n\r\nexport function deleteCardRequest(cardId) {\r\n    return fetch(`${config.baseUrl}/cards/${cardId}`, {\r\n        method: \"DELETE\",\r\n        headers: config.headers,\r\n    })\r\n    .then(handleResponse); \r\n};\r\n\r\nexport function updateAvatar(avatar) {\r\n    return fetch(`${config.baseUrl}/users/me/avatar`, {\r\n        method: \"PATCH\",\r\n        headers: config.headers,\r\n        body: JSON.stringify({\r\n            avatar: avatar,\r\n        }),\r\n    })\r\n    .then(handleResponse);\r\n}; \r\n\r\n\r\n","import {addLike, removeLike, deleteCardRequest} from \"./api.js\";\r\n\r\nexport function createCard(card, deleteCard, openImage, likeCard, userId) {\r\n    const cardTemplate = document.querySelector('#card-template').content;\r\n    const cardElement = cardTemplate.querySelector('.card').cloneNode(true);\r\n  \r\n    cardElement.querySelector('.card__title').textContent = card.name;\r\n  \r\n    const cardTitle = cardElement.querySelector('.card__title');\r\n    const cardImage = cardElement.querySelector('.card__image');\r\n\r\n    const deleteButton = cardElement.querySelector('.card__delete-button');\r\n\r\n    const likeButton = cardElement.querySelector('.card__like-button');\r\n    const likeCount = cardElement.querySelector('.card__like-count');\r\n  \r\n    cardTitle.textContent = card.name;\r\n    cardImage.src = card.link;\r\n    cardImage.alt = card.name;\r\n    \r\n    if (userId === card.owner._id) {\r\n        deleteButton.addEventListener(\"click\", function() {\r\n            deleteCard(card._id, cardElement)\r\n        });\r\n    } else deleteButton.remove();\r\n    \r\n    likeCount.textContent = card.likes.length;\r\n   \r\n    likeButton.addEventListener('click', function() {likeCard(card._id, likeButton, likeCount)});\r\n\r\n    if (card.likes.some((user) => user._id === userId)) {\r\n        likeButton.classList.add('card__like-button_is-active');\r\n    }\r\n  \r\n    cardImage.addEventListener('click', function() {openImage(card)});\r\n\r\n    return cardElement;\r\n};\r\n  \r\nexport function deleteCard(cardId, card) {\r\n    deleteCardRequest(cardId)\r\n        .then(function() {\r\n            card.remove();\r\n        })\r\n        .catch(function(error) {\r\n            console.log(error);                \r\n        });\r\n};\r\n\r\nexport function likeCard(cardId, likeButton, likeCount) {\r\n    if(!likeButton.classList.contains('card__like-button_is-active')) {\r\n        addLike(cardId)\r\n            .then(function(card) {\r\n                likeCount.textContent = card.likes.length;\r\n                likeButton.classList.add('card__like-button_is-active');\r\n            })\r\n            .catch(function(error) {\r\n                console.log(error);                \r\n            });\r\n    } else {\r\n        removeLike(cardId)\r\n            .then(function(card) {\r\n                likeCount.textContent = card.likes.length;\r\n                likeButton.classList.remove('card__like-button_is-active');\r\n            })\r\n    }\r\n};\r\n","export function openPopup(popup) {\r\n    popup.classList.add('popup_is-opened');\r\n    document.addEventListener('keydown', closePopupEsc);\r\n} \r\n\r\nexport function closePopup(popup) {\r\n    popup.classList.remove('popup_is-opened');\r\n    document.removeEventListener('keydown', closePopupEsc);\r\n} \r\n\r\nexport function closePopupEsc(event) {\r\n\r\n    if (event.key === \"Escape\") {\r\n        const popupIsOpen = document.querySelector('.popup_is-opened');\r\n\r\n        closePopup(popupIsOpen);\r\n    }\r\n}","export function enableValidation(validationConfig) {\r\n    const formList = Array.from(document.querySelectorAll('.popup__form'));\r\n    formList.forEach(function(formSelector) {\r\n        formSelector.addEventListener('submit', function(event) {\r\n            event.preventDefault();\r\n        });\r\n        setEventListeners(formSelector);\r\n    });\r\n};\r\n\r\n\r\nexport function clearValidation(formSelector) {\r\n    const inputList = Array.from(document.querySelectorAll('.popup__input'));\r\n    const errorList = Array.from(document.querySelectorAll('.popup__error'));\r\n    const submitButtonSelector = formSelector.querySelector('.popup__button')\r\n    errorList.forEach(function(errorSelector) {\r\n        errorSelector.classList.remove('popup__error_visible');\r\n        errorSelector.textContent = '';\r\n    });\r\n    inputList.forEach(function(inputSelector) {\r\n        inputSelector.classList.remove('popup__input_type_error');\r\n    });\r\n    toggleButtonState(inputList, submitButtonSelector);   \r\n}\r\n\r\nfunction setEventListeners(formSelector) {\r\n    const inputList = Array.from(formSelector.querySelectorAll('.popup__input'));\r\n    const submitButtonSelector = formSelector.querySelector('.popup__button');\r\n\r\n    toggleButtonState(inputList, submitButtonSelector);\r\n\r\n    inputList.forEach(function(inputSelector) {\r\n        inputSelector.addEventListener('input', function() {\r\n            checkInputValidity(formSelector, inputSelector);\r\n            toggleButtonState(inputList, submitButtonSelector);\r\n        });\r\n    });\r\n};\r\n\r\nfunction checkInputValidity(formSelector, inputSelector) {\r\n    if (inputSelector.validity.patternMismatch) {\r\n        inputSelector.setCustomValidity(inputSelector.dataset.errorMessage);\r\n    } else {\r\n        inputSelector.setCustomValidity(\"\");\r\n    }\r\n\r\n    if (!inputSelector.validity.valid) {\r\n        showInputError(formSelector, inputSelector, inputSelector.validationMessage);\r\n    } else {\r\n        hideInputError(formSelector, inputSelector);\r\n    }\r\n};\r\n\r\nfunction hasInvalidInput(inputList) {\r\n    return inputList.some(function(inputSelector) {\r\n        return !inputSelector.validity.valid;\r\n    })\r\n};\r\n\r\nfunction showInputError(formSelector, inputSelector, errorMessage) {\r\n    const errorSelector = formSelector.querySelector(`.${inputSelector.id}-error`);\r\n    inputSelector.classList.add('popup__input_type_error');\r\n    errorSelector.textContent = errorMessage;\r\n    errorSelector.classList.add('popup__error_visible');\r\n};\r\n\r\nfunction hideInputError(formSelector, inputSelector) {\r\n    const errorSelector = formSelector.querySelector(`.${inputSelector.id}-error`);\r\n    inputSelector.classList.remove('popup__input_type_error');\r\n    errorSelector.classList.remove('popup__error_visible');\r\n    errorSelector.textContent = '';\r\n};\r\n\r\nfunction toggleButtonState(inputList, submitButtonSelector) {\r\n    if (hasInvalidInput(inputList)) {\r\n      submitButtonSelector.disabled = true;\r\n      submitButtonSelector.classList.add('popup__button_disabled');\r\n    } else {\r\n      submitButtonSelector.disabled = false;\r\n      submitButtonSelector.classList.remove('popup__button_disabled');\r\n    }\r\n};\r\n  \r\n\r\n\r\n","import './styles/index.css';\r\nimport {initialCards} from './components/cards.js';\r\nimport {createCard, deleteCard, likeCard} from './components/card.js';\r\nimport {openPopup, closePopup, closePopupEsc} from './components/modal.js';\r\nimport {enableValidation, clearValidation} from './components/validation.js';\r\nimport {getUser, updateUser, getCards, addNewCard, updateAvatar} from './components/api.js';\r\n\r\nconst cardsContainer = document.querySelector('.places__list');\r\nconst popups = document.querySelectorAll('.popup');\r\nconst formSelector = document.querySelector('.popup__form');\r\nconst avatar = document.querySelector(\".profile__image\");\r\n\r\nconst profileEditButton = document.querySelector('.profile__edit-button');\r\nconst profileEditPopup = document.querySelector('.popup_type_edit');\r\nconst inputProfileTitle = profileEditPopup.querySelector('.popup__input_type_name');\r\nconst inputProfileDescription = profileEditPopup.querySelector('.popup__input_type_description');\r\nconst profileTitle = document.querySelector('.profile__title');\r\nconst profileDescription = document.querySelector('.profile__description');\r\n\r\n\r\nconst addNewCardButton = document.querySelector('.profile__add-button');\r\nconst newCardPopup = document.querySelector('.popup_type_new-card');\r\nconst newCardForm = document.querySelector('[name=\"new-place\"]');\r\nconst newCardPopupTextInput = document.querySelector('.popup__input_type_card-name');\r\nconst newCardPopupUrlInput = document.querySelector('.popup__input_type_url');\r\n\r\nconst cardImagePopup = document.querySelector('.popup_type_image');\r\nconst popupImage = cardImagePopup.querySelector('.popup__image');\r\nconst popupImageCaption = cardImagePopup.querySelector('.popup__caption');\r\n\r\nconst avatarForm = document.querySelector('[name=\"avatar\"]');\r\nconst avatarImage = document.querySelector('.profile__image');\r\nconst avatarPopup = document.querySelector('.popup_type_avatar');\r\nconst avatarPopupUrlInput = document.querySelector('.popup__input_type_url-avatar');\r\n\r\nconst validationConfig = {\r\n    formSelector: '.popup__form',\r\n    inputSelector: '.popup__input',\r\n    submitButtonSelector: '.popup__button',\r\n    inactiveButtonClass: 'popup__button_disabled',\r\n    inputErrorClass: 'popup__input_type_error',\r\n    errorClass: 'popup__error_visible'\r\n};\r\n\r\nPromise.all([getUser(), getCards()])\r\n    .then(([data, cards]) => {\r\n        avatar.style.backgroundImage = `url(${data.avatar})`;\r\n        profileTitle.textContent = data.name;\r\n        profileDescription.textContent = data.about;\r\n        const userId = data._id;\r\n        cards.forEach((card) => {\r\n          cardsContainer.append(\r\n            createCard(card, deleteCard, openImage, likeCard, userId)\r\n          );\r\n        });\r\n    })\r\n    .catch((err) => {\r\n        console.error('Ошибка:', err);\r\n    });\r\n\r\nprofileEditButton.addEventListener('click', function() {\r\n    openPopup(profileEditPopup);\r\n    inputProfileTitle.value = profileTitle.textContent;\r\n    inputProfileDescription.value = profileDescription.textContent;\r\n    clearValidation(formSelector);\r\n}); \r\n\r\naddNewCardButton.addEventListener('click', function() {\r\n    openPopup(newCardPopup);\r\n    newCardForm.reset();\r\n    clearValidation(formSelector);\r\n});\r\n\r\navatarImage.addEventListener('click', function() {\r\n    openPopup(avatarPopup);\r\n    avatarForm.reset();\r\n    clearValidation(formSelector);\r\n});\r\n\r\npopups.forEach(function(popup) {\r\n    popup.addEventListener('click', function(event) {\r\n        if(event.target.classList.contains('popup__close')|| event.target.classList.contains('popup')) {\r\n            closePopup(popup);\r\n        }\r\n    })\r\n})\r\n\r\nfunction handleProfileFormSubmit(event) {\r\n    event.preventDefault();\r\n    const title = inputProfileTitle.value;\r\n    const description = inputProfileDescription.value;\r\n    event.submitter.textContent = 'Сохранение...';\r\n    updateUser(title, description)\r\n        .then(function() {\r\n            profileTitle.textContent = title;\r\n            profileDescription.textContent = description;\r\n            closePopup(profileEditPopup);\r\n        })\r\n        .catch(function(error) {\r\n            console.log(error);            \r\n        })\r\n        .finally(function() {\r\n            event.submitter.textContent = 'Сохранить';\r\n        })\r\n};\r\n\r\nprofileEditPopup.addEventListener('submit', handleProfileFormSubmit);\r\n\r\nfunction handleNewCardSubmit(event) {\r\n    event.preventDefault();\r\n    const name = newCardPopupTextInput.value;\r\n    const link = newCardPopupUrlInput.value;\r\n    event.submitter.textContent = 'Сохранение...';\r\n    addNewCard(name, link)\r\n        .then(function(card) {\r\n            cardsContainer.prepend(\r\n                createCard(card, deleteCard, openImage, likeCard)\r\n            );\r\n            closePopup(newCardPopup);\r\n        })\r\n        .catch(function(error) {\r\n            console.log(error);            \r\n        })\r\n        .finally(function() {\r\n            event.submitter.textContent = 'Сохранить';\r\n        })\r\n}; \r\n\r\nnewCardPopup.addEventListener('submit', handleNewCardSubmit);\r\n\r\nfunction handleAvatarSubmit(event) {\r\n    event.preventDefault();\r\n    const avatarLink = avatarPopupUrlInput.value;\r\n    event.submitter.textContent = 'Сохранение...';\r\n    updateAvatar(avatarLink)\r\n        .then(function() {\r\n            avatar.style.backgroundImage = `url(${avatarLink})`;\r\n            closePopup(avatarPopup);\r\n        })\r\n        .catch(function(error) {\r\n            console.log(error);            \r\n        })\r\n        .finally(function() {\r\n            event.submitter.textContent = 'Сохранить';\r\n        })\r\n};\r\n\r\navatarPopup.addEventListener('submit', handleAvatarSubmit);\r\n\r\nfunction openImage(card) {    \r\n    popupImage.src = card.link;\r\n    popupImage.alt = card.name;    \r\n    popupImageCaption.textContent = card.name;    \r\n    openPopup(cardImagePopup);\r\n};    \r\n\r\nenableValidation(validationConfig);"],"names":["config","baseUrl","headers","authorization","handleResponse","response","ok","json","Promise","reject","concat","status","createCard","card","deleteCard","openImage","likeCard","userId","cardElement","document","querySelector","content","cloneNode","textContent","name","cardTitle","cardImage","deleteButton","likeButton","likeCount","src","link","alt","owner","_id","addEventListener","remove","likes","length","some","user","classList","add","cardId","fetch","method","then","deleteCardRequest","catch","error","console","log","contains","removeLike","addLike","openPopup","popup","closePopupEsc","closePopup","removeEventListener","event","key","clearValidation","formSelector","inputList","Array","from","querySelectorAll","errorList","submitButtonSelector","forEach","errorSelector","inputSelector","toggleButtonState","validity","valid","hasInvalidInput","disabled","cardsContainer","popups","avatar","profileEditButton","profileEditPopup","inputProfileTitle","inputProfileDescription","profileTitle","profileDescription","addNewCardButton","newCardPopup","newCardForm","newCardPopupTextInput","newCardPopupUrlInput","cardImagePopup","popupImage","popupImageCaption","avatarForm","avatarImage","avatarPopup","avatarPopupUrlInput","all","_ref","_ref2","data","cards","style","backgroundImage","about","append","err","value","reset","target","preventDefault","title","description","submitter","body","JSON","stringify","finally","addNewCard","prepend","avatarLink","updateAvatar","patternMismatch","setCustomValidity","dataset","errorMessage","id","hideInputError","showInputError","validationMessage","checkInputValidity","setEventListeners"],"sourceRoot":""}